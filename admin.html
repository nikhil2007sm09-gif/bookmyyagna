<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Analytics Dashboard ‚Äì BookMyYagna</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
       
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
}

body {
    display: flex;
    background: #f0f2f5;
    min-height: 100vh;
    transition: background-color 0.3s;
    overflow-x: hidden;
}


body.dark-mode {
    background: #121212;
    color: #e0e0e0;
}

body.dark-mode .sidebar {
    background: #1e1e1e;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
}

body.dark-mode .sidebar a {
    color: #b0b0b0;
}

body.dark-mode .sidebar a:hover {
    background: #ff9800;
    color: #1e1e1e;
}

body.dark-mode .header h1 {
    color: #e0e0e0;
}

body.dark-mode .chart-container,
body.dark-mode .recent-activity {
    background: #1e1e1e;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    border: 1px solid #333;
}


.sidebar {
    width: 250px;
    background: #2c3e50;
    color: white;
    display: flex;
    flex-direction: column;
    padding: 20px 0;
    transition: width 0.3s ease;
    position: fixed;
    height: 100vh;
    z-index: 999;
}

.logo {
    text-align: center;
    color: #ff9800;
    margin-bottom: 40px;
    font-size: 24px;
    font-weight: 700;
    padding: 0 20px;
}

.sidebar a {
    text-decoration: none;
    color: white;
    padding: 15px 25px;
    margin: 5px 0;
    border-radius: 0 50px 50px 0;
    display: flex;
    align-items: center;
    gap: 15px;
    transition: 0.3s;
    font-weight: 600;
}

.sidebar a:hover,
.sidebar a.active {
    background: #ff9800;
    color: #2c3e50;
}


.main {
    flex: 1;
    padding: 30px;
    margin-left: 250px;
    width: calc(100% - 250px);
    transition: margin-left 0.3s ease;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
    flex-wrap: wrap;
}

.header h1 {
    font-size: 32px;
    color: #2c3e50;
}

.dark-mode-toggle {
    background: #2c3e50;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 50px;
    cursor: pointer;
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
}


.cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
}

.card {
    background: white;
    padding: 30px;
    border-radius: 12px;
    text-align: left;
    position: relative;
    overflow: hidden;
    transition: 0.3s;
}

.card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
}

.card-icon {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 40px;
    opacity: 0.3;
}


.card-primary { background: linear-gradient(135deg, #ff9800, #ffb74d); }
.card-success { background: linear-gradient(135deg, #4caf50, #81c784); }
.card-info    { background: linear-gradient(135deg, #2196f3, #64b5f6); }
.card-purple  { background: linear-gradient(135deg, #9c27b0, #ba68c8); }
.card-danger  { background: linear-gradient(135deg, #f44336, #e57373); }
.card-teal    { background: linear-gradient(135deg, #009688, #4db6ac); }


.chart-layout {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 25px;
    margin-bottom: 40px;
}

.chart-container,
.recent-activity {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
}



.activity-table {
    width: 100%;
    max-width: 900px;
    border-collapse: collapse;
    font-size: 14px;
    background: #fff;
    overflow: hidden;
    border-radius: 10px;
}

.activity-table th,
.activity-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #f0f0f0;
}

.activity-table th {
    background: #f7f7f7;
    font-weight: 600;
    text-transform: uppercase;
}

/* Status Tags */
.status-tag {
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    display: inline-block;
}

.status-tag.pending   { background: #fff3e0; color: #ff9800; }
.status-tag.confirmed { background: #e8f5e9; color: #4caf50; }
.status-tag.cancelled { background: #ffebee; color: #f44336; }


@media (max-width: 768px) {
    .activity-table {
        width: 100%;
        font-size: 13px;
    }
}

@media (max-width: 600px) {
    .activity-table thead {
        display: none;
    }

    .activity-table tr {
        display: block;
        margin-bottom: 15px;
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    }

    .activity-table td {
        display: flex;
        justify-content: space-between;
        padding: 10px 8px;
        border: none;
    }

    .activity-table td::before {
        content: attr(data-label);
        font-weight: bold;
        color: #555;
    }
}

.popup {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(3px);
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.popup-content {
    background: #fff;
    width: 90%;
    max-width: 350px;
    padding: 25px;
    border-radius: 15px;
    text-align: center;
    animation: popupShow 0.3s ease;
}

@keyframes popupShow {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}


@media (max-width: 1024px) {
    .chart-layout {
        grid-template-columns: 1fr;
    }
}


@media (max-width: 768px) {

    .sidebar {
        width: 70px;
    }

    .main {
        margin-left: 70px;
        width: calc(100% - 70px);
        padding: 20px;
    }

    .logo,
    .sidebar a span {
        display: none;
    }

    .sidebar a {
        justify-content: center;
        padding: 15px 10px;
        border-radius: 10px;
    }

    .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
}


@media (max-width: 480px) {
    .header h1 {
        font-size: 24px;
    }

    .card {
        padding: 20px;
    }
}


.popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.55); 
    display: none; 
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(5px);
    z-index: 9999;
    animation: fadeIn 0.3s ease forwards;
}


.popup-content {
    background: rgba(255, 255, 255, 0.2);
    padding: 30px 35px;
    width: 380px;
    border-radius: 20px;
    text-align: center;
    backdrop-filter: blur(15px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.35);
    animation: popupZoom 0.35s ease forwards;
    border: 1px solid rgba(255,255,255,0.3);
}


.popup-content h2 {
    margin-bottom: 10px;
    color: #fff;
    font-size: 26px;
    font-weight: 700;
}


.popup-content p {
    color: #f1f1f1;
    margin-bottom: 25px;
    font-size: 16px;
}


.join-btn, .close-btn {
    padding: 12px 22px;
    margin: 8px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    transition: 0.25s ease;
}

.join-btn {
    background: #ff7300;
    color: #fff;
    box-shadow: 0 4px 10px rgba(255,115,0,0.4);
}
.join-btn:hover {
    background: #e36400;
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(255,115,0,0.5);
}


.close-btn {
    background: #eee;
    color: #333;
}
.close-btn:hover {
    background: #ddd;
    transform: translateY(-3px);
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes popupZoom {
    from { transform: scale(0.7); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.start-meeting-btn {
    padding: 14px 28px;
    background: linear-gradient(135deg, #ff7a00, #ff4400);
    color: #fff;
    border: none;
    font-size: 18px;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    letter-spacing: 1px;
    transition: 0.3s ease;
    box-shadow: 0 6px 18px rgba(255, 94, 0, 0.4);
    outline: none;
}


.start-meeting-btn:hover {
    transform: translateY(-3px) scale(1.03);
    background: linear-gradient(135deg, #ff8e26, #ff5500);
    box-shadow: 0 10px 25px rgba(255, 90, 0, 0.6);
}


.start-meeting-btn:active {
    transform: scale(0.95);
}


.start-meeting-btn.glow {
    animation: glowPulse 2s infinite alternate;
}

@keyframes glowPulse {
    from { box-shadow: 0 0 10px rgba(255, 90, 0, 0.7); }
    to   { box-shadow: 0 0 25px rgba(255, 120, 0, 1); }
}

    </style>
</head>

<body>

    <div class="sidebar">
        <div class="logo">
            <h4>BMY Admin</h4>
        </div>
        <nav>
            <a href="admin.html" class="active"><i class="fas fa-chart-bar"></i><span>Dashboard</span></a>
            <a href="Booking.html"><i class="fas fa-book"></i><span>Bookings</span></a>
            <a href="panditlogin.html"><i class="fas fa-user-friends"></i><span>Pandits</span></a>
            <a href="setting.html"><i class="fas fa-cog"></i><span>Settings</span></a>
            <a href="blog.html">All Blog</a>
            <a href="add-blog.html">Add New Blog</a>
             <!-- <a href="manage-blogs.html">Manage Blogs</a> -->

         


        </nav>
    </div>

    <div class="main">
        <div class="header">
            <h1>Analytics Overview üìä</h1>
            <button id="darkModeToggle" class="dark-mode-toggle">
                <i class="fas fa-moon"></i>
                <span>Dark Mode</span>
            </button>
        </div>
 

        <div class="cards">
            <div class="card card-primary">
                <i class="fas fa-clipboard-list card-icon"></i>
                <p>Total Bookings</p>
                <h2 id="totalBookings">120</h2>
            </div>
            <div class="card card-success">
                <i class="fas fa-chart-line card-icon"></i>
                <p>Revenue (Last 30 Days)</p>
                <h2 id="revenue">‚Çπ45,000</h2>
            </div>
            <div class="card card-info">
                <i class="fas fa-hourglass-half card-icon"></i>
                <p>Pending Bookings</p>
                <h2 id="pendingBookings">15</h2>
            </div>
            <div class="card card-danger">
                <i class="fas fa-users card-icon"></i>
                <p>Active Users</p>
                <h2 id="totalUsers">50</h2>
            </div>
            <div class="card card-teal">
                <i class="fas fa-calendar-check card-icon"></i>
                <p>Completed Poojas</p>
                <h2 id="completedPoojas">85</h2>
            </div>
            <div class="card card-purple">
                <i class="fas fa-star card-icon"></i>
                <p>Top Pooja</p>
                <h2 id="topPooja">Satyanarayan</h2>
            </div>
        </div>
  

        <div class="chart-layout">
            <div class="chart-container">
                <canvas id="weeklyBookingsChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="statusDistributionChart"></canvas>
            </div>
        </div>

        <div class="recent-activity">
            <h3>Recent Bookings üìù</h3>
            <table class="activity-table">
                <thead>
                    <tr>
                        <th>Pooja Name</th>
                        <th>Date</th>
                        <th>User Email</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="activityTableBody">
                    <tr>
                        <td>Rudra Abhishek</td>
                        <td>28 Nov 2025</td>
                        <td>user1@example.com</td>
                        <td><span class="status-tag confirmed">Confirmed</span></td>
                    </tr>
                    <tr>
                        <td>Griha Pravesh</td>
                        <td>29 Nov 2025</td>
                        <td>user2@example.com</td>
                        <td><span class="status-tag pending">Pending</span></td>
                    </tr>
                    <tr>
                        <td>Maha Mrityunjay</td>
                        <td>27 Nov 2025</td>
                        <td>user3@example.com</td>
                        <td><span class="status-tag completed">Completed</span></td>
                    </tr>
                    <tr>
                        <td>Satyanarayan</td>
                        <td>25 Nov 2025</td>
                        <td>user4@example.com</td>
                        <td><span class="status-tag cancelled">Cancelled</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br>
<button class="start-meeting-btn" onclick="openMeetingPopup()">Start Meeting</button>
<div id="meetingPopup" class="popup">
    <div class="popup-content">
        <h2>Join Meeting</h2>
        <p>Your meeting is ready. Click below to join.</p>

        <button class="join-btn" onclick="goToMeeting()">Join Now</button>
        <button class="close-btn" onclick="closePopup()">Close</button>
    </div>
   
</div>
<br>

   

    </div>


    <script>
       
        const toggleButton = document.getElementById('darkModeToggle');
        const body = document.body;

        function updateChartColors(chart, color) {
            chart.options.scales.y.ticks.color = color;
            chart.options.scales.x.ticks.color = color;
            chart.options.plugins.legend.labels.color = color;
            chart.update();
        }

        function handleDarkModeToggle() {
            body.classList.toggle('dark-mode');

            const isDarkMode = body.classList.contains('dark-mode');
            const icon = toggleButton.querySelector('i');
            const text = toggleButton.querySelector('span');
            const chartColor = isDarkMode ? '#e0e0e0' : '#666666';

            if (isDarkMode) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                text.textContent = 'Light Mode';
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                text.textContent = 'Dark Mode';
            }

     
            if (window.weeklyBookingsChart) updateChartColors(window.weeklyBookingsChart, chartColor);
            if (window.statusDistributionChart) updateChartColors(window.statusDistributionChart, chartColor);

            localStorage.setItem('darkMode', isDarkMode);
        }

        toggleButton.addEventListener('click', handleDarkModeToggle);

        (function initDarkMode() {
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (isDarkMode) {
                body.classList.add('dark-mode');
               
                toggleButton.querySelector('i').classList.remove('fa-moon');
                toggleButton.querySelector('i').classList.add('fa-sun');
                toggleButton.querySelector('span').textContent = 'Light Mode';
            }
        })();


      
        const chartTextColor = body.classList.contains('dark-mode') ? '#e0e0e0' : '#666666';

      
        const weeklyBookingsCtx = document.getElementById('weeklyBookingsChart').getContext('2d');
        window.weeklyBookingsChart = new Chart(weeklyBookingsCtx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Bookings This Week',
                    data: [12, 19, 14, 23, 18, 25, 30],
                    borderColor: '#ff9800',
                    backgroundColor: 'rgba(255,152,0,0.2)',
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#ff9800',
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: { color: chartTextColor }
                    },
                    title: {
                        display: true,
                        text: 'Weekly Booking Trend',
                        color: chartTextColor
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { color: chartTextColor }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { color: chartTextColor }
                    }
                }
            }
        });

        
        const statusDistributionCtx = document.getElementById('statusDistributionChart').getContext('2d');
        window.statusDistributionChart = new Chart(statusDistributionCtx, {
            type: 'doughnut',
            data: {
                labels: ['Confirmed', 'Pending', 'Completed', 'Cancelled'],
                datasets: [{
                    data: [50, 15, 85, 5],
                    backgroundColor: ['#4caf50', '#ff9800', '#2196f3', '#f44336'],
                    hoverOffset: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { color: chartTextColor }
                    },
                    title: {
                        display: true,
                        text: 'Booking Status Distribution',
                        color: chartTextColor
                    }
                }
            }
        });


       
        if (body.classList.contains('dark-mode')) {
            updateChartColors(window.weeklyBookingsChart, '#e0e0e0');
            updateChartColors(window.statusDistributionChart, '#e0e0e0');
        }


        function animateCounter(id, start, end, duration) {
            const element = document.getElementById(id);
            let startTime = null;

            function updateCounter(currentTime) {
                if (!startTime) startTime = currentTime;
                const progress = Math.min((currentTime - startTime) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                element.textContent = value.toLocaleString(); // Comma format
                if (progress < 1) requestAnimationFrame(updateCounter);
            }
            requestAnimationFrame(updateCounter);
        }
     
        window.onload = () => {
            animateCounter("totalBookings", 0, 120, 1200);        
            animateCounter("revenue", 0, 45000, 1500);            
            animateCounter("pendingBookings", 0, 15, 1000);
            animateCounter("totalUsers", 0, 50, 1200);
            animateCounter("completedPoojas", 0, 85, 1300);
        };

    </script>
<script>
function openMeetingPopup() {
    document.getElementById('meetingPopup').style.display = 'flex';
}

function closePopup() {
    document.getElementById('meetingPopup').style.display = 'none';
}

function goToMeeting() {
    window.location.href = "meeting.html";
}
document.getElementById("blogForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    let formData = new FormData(e.target);

    let res = await fetch("http://localhost:3000/api/blogs", {
        method: "POST",
        body: formData
    });

    let data = await res.json();
    alert(data.message);
});
function openMeetingPopup() {
    document.getElementById('meetingPopup').style.display = 'flex';
}

function closePopup() {
    document.getElementById('meetingPopup').style.display = 'none';
}

function goToMeeting() {
    window.location.href = "meeting.html";
}
</script>
</body>

</html>